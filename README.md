# SunOS 群聊管理插件

一个功能完整的 AstrBot 插件，提供词库管理、欢迎语设置、自动回复等群聊管理功能。

## 功能特性

### 🔧 核心功能模块

#### 1. 词库管理功能 (ck 命令)
**管理员功能：**
- 添加词库: `/sunos ck add <关键词> <回复内容>`
  - 支持换行符 `\n`
  - 自动检查重复关键词
  - 示例：`/sunos ck add 你好 你好呀！`
- 删除词库: `/sunos ck del <序号>`
  - 通过序号删除指定词库条目
  - 示例：`/sunos ck del 1`

**用户功能：**
- 查看词库: `/sunos ck list`
  - 显示所有词库条目及其序号
  - 显示词库统计信息
- 帮助信息: `/sunos ck help`

#### 2. 欢迎语管理功能 (wc 命令)
**管理员功能：**
- 设置欢迎语: `/sunos wc set <欢迎语内容>`
  - 支持占位符：`{user}` (@ 新成员)、`{group}` (群号)
  - 支持换行符 `\n`
  - 示例：`/sunos wc set 欢迎 {user} 加入群聊！`
- 删除欢迎语: `/sunos wc del`
  - 删除当前群的欢迎语设置

**用户功能：**
- 查看欢迎语: `/sunos wc show`
  - 显示当前群的欢迎语设置
- 帮助信息: `/sunos wc help`

#### 3. 群聊开关管理功能
**管理员功能：**
- 开启功能: `/sunos enable`
  - 为当前群聊开启 sunos 功能
- 关闭功能: `/sunos disable`
  - 为当前群聊关闭 sunos 功能
- 查看状态: `/sunos status`
  - 查看当前群聊的功能开启状态

#### 4. 自动回复功能
- **智能匹配**: 自动检测群聊/私聊消息中的关键词
- **即时回复**: 匹配到关键词后自动发送对应回复
- **权限控制**: 只在已开启功能的群聊中生效

#### 5. 入群欢迎功能
- **自动欢迎**: 检测到新成员入群时自动发送欢迎语
- **模板支持**: 支持 `{user}` 和 `{group}` 占位符
- **退群通知**: 检测到成员退群时发送通知

#### 6. 权限管理系统
- **用户权限**: 查看、帮助类功能
- **管理员权限**: 增删改、群聊开关功能
- **群聊控制**: 支持按群聊单独开启/关闭功能

### 🛠️ 技术特性

#### 数据持久化
- 使用 SQLite 数据库存储所有数据
- 支持词库、欢迎语、群聊开关状态的持久化
- 自动数据迁移和备份

#### 架构设计
- **模块化设计**: 分离命令处理、业务逻辑、数据访问
- **单一职责**: 每个类专注特定功能
- **依赖注入**: 组件间松耦合设计

#### 消息处理
- 支持群聊和私聊消息
- 智能命令解析
- 统一的错误处理机制

## 使用场景

- **群聊管理**: 为 QQ 群提供自动回复和欢迎功能
- **知识库**: 建立群内常见问题的自动回答系统
- **互动增强**: 通过关键词回复增加群聊活跃度
- **新人引导**: 自动欢迎新成员并提供群规信息

## 命令总览

```
/sunos help              # 主帮助
/sunos ck add <词> <回复> # 添加词库
/sunos ck del <序号>     # 删除词库
/sunos ck list           # 查看词库
/sunos wc set <欢迎语>   # 设置欢迎语
/sunos wc del            # 删除欢迎语
/sunos wc show           # 查看欢迎语
/sunos enable            # 开启功能
/sunos disable           # 关闭功能
/sunos status            # 查看状态
```

## 安装说明

1. 将插件文件放置在 AstrBot 的插件目录中
2. 重启 AstrBot 或在管理面板中重载插件
3. 插件会自动创建数据库文件 `data/sunos.db`

## 注意事项

- 管理员权限基于 AstrBot 的权限系统
- 数据库文件会自动创建在 `data` 目录下
- 支持 aiocqhttp (OneBotv11) 平台
- 入群欢迎功能需要平台支持群成员变动事件

## 版本历史

- v1.0.0: 初始版本，包含所有核心功能

## 作者

Akuma

## 许可证

本项目基于 MIT 许可证开源。